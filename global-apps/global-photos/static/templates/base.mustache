<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon"/>

    <title>Global Photos</title>
    {{$head}}{{/head}}
</head>
<body class="container" style="position: relative;">
<div class="mt-3">
    <div class="row mb-1">
        <div class="col-sm-3 col-12">
            <h3><a href="/" style="text-decoration: none;">Global Photos</a></h3>
            <div class="ml-1">
                <form action="/auth/logout" method="post">
                    <button class="btn btn-sm btn-outline-success" type="submit">Log Out</button>
                </form>
            </div>
        </div>
        <div class="col-sm-9 col-12" style="margin: auto;">
            <div class="row justify-content-md-center">
                <a href="/" class="col-12 col-md-3 col-sm-6 border m-1 p-3"
                   style="width:170px; height: 30px; position: relative">
                    <i class="fas fa-align-justify"
                       style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);">All photos</i>
                </a>
                <a href="/albums" class="col-12 col-md-2 col-sm-5 border m-1 p-3"
                   style="width:170px; height: 30px; position: relative">
                    <i class="fas fa-book-open"
                       style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);">Albums</i>
                </a>

                {{^albums}}{{^photos}}
                    <a href="#" class="col-12 col-md-2 col-sm-5 border m-1 p-3"
                       style="width:170px; height: 30px; position: relative">
                        <i class="fas fa-book-open"
                           style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);">{{album.title}}</i>
                    </a>
                {{/photos}}{{/albums}}

                {{#photos}}
                    <a href="/new/{{album.id}}" class="col-12 col-md-2 col-sm-6 border m-1 p-3"
                       id="uploadImageButton" style="width:160px; height: 30px; position: relative">
                        <i class="fas fa-plus"
                           style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);">Upload</i>
                    </a>
                {{/photos}}

                {{^albums}}
                    <div class="col-12 col-sm-5 col-md-2 tools m-1 p-3 border"
                         style="width:170px; height: 30px; position: relative">
                        <div data-toggle="dropdown"
                             data-target="#tools">
                            <a href="/new/{{album.id}}" class="btn btn-link">
                                <i class="fas fa-tools"
                                   style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);">Tools</i>
                            </a>

                            <div class="dropdown-menu">
                                <button id="delete_photos_tool" type="button"
                                        class="btn btn-outline-light text-dark" style="width: 100%">
                                    Delete Photos
                                </button>

                                {{#rootAlbum}}
                                    <button id="move_photos_tool" type="button"
                                            class="btn btn-outline-light text-dark" style="width: 100%">
                                        Move Photos
                                    </button>

                                    <button type="button" class="btn btn-outline-light text-dark" style="width: 100%"
                                            id="create-album">
                                        Create album
                                    </button>
                                {{/rootAlbum}}
                                {{^rootAlbum}}
                                    <button id="delete_album_tool" type="button"
                                            class="btn btn-outline-light text-dark"
                                            style="width: 100%" data-url="/delete/{{album.id}}">
                                        Delete Album
                                    </button>
                                    <button id="update_album_tool" type="button"
                                            class="btn btn-outline-light text-dark"
                                            style="width: 100%" data-url="/update/{{album.id}}">
                                        Update metadata
                                    </button>
                                {{/rootAlbum}}
                            </div>
                        </div>
                    </div>
                {{/albums}}
            </div>
        </div>
    </div>
</div>

<div class="row">
    <nav class="col-sm-12 col-12 mt-2">
        <ul class="nav nav-pills flex-column">
            <li class="nav-item" style="position: relative">
                <form class="needs-validation" novalidate>
                    <div id="new_album_form"
                         style="display: none; background-color: rgb(245,245,245); border-radius: 0.5em;"
                         data-url="/new/album" class="p-2">
                        <div style="position: relative">
                            <input maxlength="120" class="form-control" id="title_album" name="title"
                                   type="text"
                                   placeholder="New album title" required max="120">
                            <textarea class="form-control mt-1 mb-1" name="content" id="description_album"
                                      maxlength="1024"
                                      placeholder="Description" rows="4"></textarea>
                            <div id="warningToast" class="toast" style="position: absolute; top: 50%; left: 50%; z-index: 100; transform: translate(-50%, -50%)" data-delay="3000">
                                <div class="toast-header text-danger">
                                    Warning
                                </div>
                                <div class="toast-body">
                                    Select images to create an album
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row justify-content-end">
                                <button class="btn btn btn-link text-success col-sm-1" type="submit" id="create_album">
                                    Create
                                </button>
                                <button class="btn btn btn-link text-danger col-sm-1" type="button"
                                        id="cancel_creation_album">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </li>

            {{^albums}}{{^photos}}
                <textarea class="form-control mt-2" name="content" id="current_description_album"
                          maxlength="1024" disabled style="background-color: rgb(245,245,245)"
                          placeholder="Description" rows="3">{{album.description}}</textarea>
            {{/photos}}{{/albums}}

            <li class="nav-item">
                <form class="needs-validation-update" novalidate>
                    <div class="mb-3 mt-2 p-2" id="update_album_form"
                         data-url="/update/{{album.id}}"
                         style="display: none; border-radius: 0.5em; background-color: rgb(245,245,245)">
                        <div>
                            <input maxlength="120" class="form-control mt-3" id="update_title_album" name="title"
                                   type="text" value="{{album.title}}"
                                   placeholder="New album title" required>
                            <textarea class="form-control mt-2" name="content" id="update_description_album"
                                      maxlength="1024"
                                      placeholder="Description" rows="3">{{album.description}}</textarea>
                        </div>
                        <div class="input-group input-group-append nav-item row mt-2 justify-content-end">
                            <button class="btn btn btn-link text-success col-sm-1" type="submit" id="update_album">
                                Update
                            </button>
                            <button class="btn btn btn-link text-danger col-sm-1" type="button"
                                    id="cancel_updating_album">
                                Cancel
                            </button>
                        </div>
                    </div>
                </form>
            </li>

            <li class="row justify-content-between align-self-center p-2 mb-1 mt-2" id="delete_photos_form"
                data-url="/delete/photo/{{album.id}}"
                style="display: none; width: 100%; border: 1px solid #ced4da; background-color: rgb(245,245,245); border-radius: 0.5em; position: relative">
                <div class="text-center col-12 col-md-6 align-self-center" style="color: gray; font-size: 1.3em">Select
                    photos to delete
                </div>
                <div class="col-12 col-md-3 input-group input-group-append">
                    <button class="btn btn-link text-danger col-6" type="submit" id="deletePhotos">Delete</button>
                    <button class="btn btn-link text-secondary col-6" type="submit"
                            id="cancelDeletionPhotos">Cancel
                    </button>
                </div>
                <div id="deleteWarningToast" class="toast" style="position: absolute; top: 50%; left: 50%; z-index: 100; transform: translate(-50%, -50%)" data-delay="3000">
                    <div class="toast-header text-danger">
                        Warning
                    </div>
                    <div class="toast-body">
                        Select image to delete
                    </div>
                </div>
            </li>

            <li class="nav-item" id="move_photos_form" style="display: none"
                data-url="/move/photo">
                <div class="row justify-con tent-between  p-2"
                     style="background-color: rgb(245,245,245); border-radius: 0.5em;">
                    <select required class="custom-select form-control col-md-6 col-sm-12 col-12" id="albumSelect">
                        <option value="">Select album and photos to move</option>
                        {{#allAlbums}}
                            <option value="{{value1}}">{{value2}}</option>
                        {{/allAlbums}}
                    </select>

                    <div class="col-md-2">
                        <button class="btn btn btn-link col-5 text-success" type="submit" id="movePhotos">Move
                        </button>
                        <button class="btn btn btn-link col-5 text-danger" type="submit"
                                id="cancelMovingPhotos">Cancel
                        </button>
                    </div>
                </div>
            </li>
        </ul>
    </nav>

    <div class="col-sm-12 col-12">
        <h4 class="text-center" style="width: 100%; margin: 0; padding: auto; color: dimgrey;">{{#photos}}
            Photos{{/photos}}{{#albums}}Albums{{/albums}}</h4>
        {{$content}}{{/content}}
    </div>
</div>

<div class="row">
    <div class="col-sm-3 col-12"></div>
    <div class="col-sm-9 col-12">
        <ul class="pagination justify-content-center mt-2" data-max-elements="{{amountItems}}" id="pagination"
            data-amout-photos="{{amountItems}}">
            <li class="page-item btn-link"><a class="page-link" onclick="prevPage()">Previous</a></li>
            <li class="page-item"><a class="page-link" id="firstPage"></a></li>
            <li class="page-item"><a class="page-link" id="secondPage"></a></li>
            <li class="page-item"><a class="page-link" id="thirdPage"></a></li>
            <li class="page-item btn-link"><a class="page-link" onclick="nextPage({{amountItems}})">Next</a></li>
            <li class="page-item ml-2">
                <select class="form-control" id="pageSizeSelect">
                    <option value="50">50</option>
                    <option value="100">100</option>
                    <option value="500">500</option>
                    <option value="1000">1000</option>
                </select>
            </li>
        </ul>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script src="/static/main.js"></script>
</body>
</html>
